// Base popover styles
.popover {
  position: relative;
  width: fit-content;
}

// Content positioning by side
.popover:not([data-side]),
.popover[data-side="bottom"] {
  .popover-content {
    left: 0;
  }

  &[data-align="end"] .popover-content {
    right: 0;
    left: unset;
  }
}

.popover[data-side="top"] {
  .popover-content {
    bottom: 100%;
    left: 0;
  }

  &[data-align="end"] .popover-content {
    bottom: 100%;
    right: 0;
    left: unset;
  }
}

.popover[data-side="left"] {
  .popover-content {
    top: 0;
    right: 100%;
  }

  &[data-align="end"] .popover-content {
    bottom: 0;
    top: unset;
  }
}

.popover[data-side="right"] {
  .popover-content {
    top: 0;
    left: 100%;
  }

  &[data-align="end"] .popover-content {
    bottom: 0;
    top: unset;
  }
}

// Open state animations
.popover.open .popover-content {
  opacity: 1;
  visibility: visible;
  transform: translate(0, 10px);
}

.popover.open[data-side="left"] .popover-content {
  transform: translate(-10px, 0);
}

.popover.open[data-side="right"] .popover-content {
  transform: translate(10px, 0);
}

.popover.open[data-side="top"] .popover-content {
  transform: translate(0, -10px);
}

// Arrow base styles
.popover.with-arrow .popover-content {
  &:before,
  &:after {
    position: absolute;
    content: '';
    width: 0;
    height: 0;
  }

  &:before {
    border: 6px inset transparent;
    border-bottom: 6px solid #fff;
    z-index: 2;
  }

  &:after {
    border: 7px inset transparent;
    border-bottom: 7px solid #ccc;
    z-index: 1;
  }
}

// Arrow positioning for bottom/default
.popover.with-arrow:not([data-side]) .popover-content,
.popover.with-arrow[data-side="bottom"] .popover-content {
  &:before {
    top: -12px;
    left: 10px;
  }

  &:after {
    top: -14px;
    left: 9px;
  }
}

.popover.with-arrow[data-side="bottom"][data-align="end"] .popover-content {
  &:before {
    top: -12px;
    right: 10px;
    left: unset;
  }

  &:after {
    top: -14px;
    right: 9px;
    left: unset;
  }
}

// Arrow positioning for left side
.popover.with-arrow[data-side="left"] .popover-content {
  &:before,
  &:after {
    transform: rotate(90deg);
  }

  &:before {
    right: -12px;
    top: 10px;
  }

  &:after {
    right: -14px;
    top: 9px;
  }
}

.popover.with-arrow[data-side="left"][data-align="end"] .popover-content {
  &:before {
    bottom: 10px;
    top: unset;
  }

  &:after {
    bottom: 9px;
    top: unset;
  }
}

// Arrow positioning for right side
.popover.with-arrow[data-side="right"] .popover-content {
  &:before,
  &:after {
    transform: rotate(-90deg);
  }

  &:before {
    left: -12px;
    top: 10px;
  }

  &:after {
    left: -14px;
    top: 9px;
  }
}

.popover.with-arrow[data-side="right"][data-align="end"] .popover-content {
  &:before {
    bottom: 10px;
    top: unset;
  }

  &:after {
    bottom: 9px;
    top: unset;
  }
}

// Arrow positioning for top side
.popover.with-arrow[data-side="top"] .popover-content {
  &:before,
  &:after {
    transform: rotate(180deg);
  }

  &:before {
    bottom: -12px;
    left: 10px;
  }

  &:after {
    bottom: -14px;
    left: 9px;
  }
}

.popover.with-arrow[data-side="top"][data-align="end"] .popover-content {
  &:before {
    right: 10px;
    left: unset;
  }

  &:after {
    right: 9px;
    left: unset;
  }
}

// Popover content base styles
.popover-content {
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s ease;
  position: absolute;
  background-color: #fff;
  border: 1px solid #ccc;
  padding: 1.25rem;
  z-index: 100;
  box-shadow: 0 2px 5px rgba(0,0,0,0.25);
  width: max-content;

  &.tiny {
    max-width: 200px;
  }

  &.small {
    max-width: 300px;
  }

  &.medium {
    max-width: 500px;
  }

  &.large {
    max-width: 800px;
  }
}
