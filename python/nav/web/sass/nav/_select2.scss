/*
 * NAV Select2 v4 customizations
 * Overrides for Select2 v4.0.13 to match NAV styling
 */
@import '../navsettings';
@import 'settings';

// =============================================================================
// Base container styles
// =============================================================================

.select2-container {
    margin: 0 0 1rem 0;
    font-family: inherit;
    font-size: 0.875rem;
    box-sizing: border-box;
}

// =============================================================================
// Single select styles
// =============================================================================

.select2-container--default .select2-selection--single {
    height: 2.315rem;
    border: 1px solid #ccc;
    border-radius: 0;
    background-color: #fafafa;

    // NAV-style dropdown arrow using SVG
    background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI2cHgiIGhlaWdodD0iM3B4IiB2aWV3Qm94PSIwIDAgNiAzIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA2IDMiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwb2x5Z29uIHBvaW50cz0iNS45OTIsMCAyLjk5MiwzIC0wLjAwOCwwICIvPjwvc3ZnPg==");
    background-repeat: no-repeat;
    background-position: calc(100% - 10px) center;

    &:hover {
        background-color: #f2f2f2;
        border-color: #999;
    }

    .select2-selection__rendered {
        line-height: 2.315rem;
        padding-left: 0.5rem;
        padding-right: 2rem;
        color: inherit;
    }

    .select2-selection__arrow {
        height: 100%;
        top: 0;
        right: 0;
        width: 20px;

        // Hide default arrow since we use background SVG
        b {
            display: none;
        }
    }

    .select2-selection__placeholder {
        color: #999;
    }

    .select2-selection__clear {
        margin-right: 1.5rem;
    }
}

// =============================================================================
// Multiple select styles
// =============================================================================

.select2-container--default .select2-selection--multiple {
    min-height: 26px;
    border: 1px solid #aaa;
    border-radius: 0;
    background-color: #fff;
    background-image: linear-gradient(to bottom, #eee 1%, #fff 15%);
    cursor: text;

    &:hover {
        border-color: #999;
    }

    .select2-selection__rendered {
        box-sizing: border-box;
        list-style: none;
        margin: 0;
        padding: 4px 5px 0 5px;
        width: 100%;

        &::after {
            // Clearfix for floated elements
            content: "";
            display: table;
            clear: both;
        }
    }

    .select2-selection__choice {
        float: left;
        margin: 2px 5px 2px 0;
        padding: 3px 5px 3px 18px;
        position: relative;
        line-height: 13px;
        color: #333;
        border: 1px solid #aaa;
        border-radius: 0;
        background-color: #e4e4e4;
        background-image: linear-gradient(to bottom, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eee 100%);
        box-shadow: 0 0 2px #fff inset, 0 1px 0 rgba(0, 0, 0, 0.05);
        cursor: default;
    }

    .select2-selection__choice__remove {
        position: absolute;
        left: 3px;
        top: 50%;
        transform: translateY(-50%);
        color: #999;
        font-weight: bold;
        margin-right: 0;
        cursor: pointer;

        &:hover {
            color: #333;
        }
    }

    .select2-search--inline {
        float: left;

        .select2-search__field {
            margin: 0;
            padding: 0;
            height: 22px;
            line-height: 22px;
            font-family: sans-serif;
            font-size: 0.875rem;
            color: #666;
            border: none;
            outline: 0;
            box-shadow: none;
            background: transparent;
            -webkit-appearance: textfield;
        }
    }
}

// =============================================================================
// Focus/active states
// =============================================================================

.select2-container--default.select2-container--focus .select2-selection--single,
.select2-container--default.select2-container--focus .select2-selection--multiple,
.select2-container--default.select2-container--open .select2-selection--single,
.select2-container--default.select2-container--open .select2-selection--multiple {
    border-color: #999;
    outline: none;
    box-shadow: 0 0 5px #999;
}

.select2-container--default.select2-container--open .select2-selection--single {
    border-bottom-color: transparent;
    background-color: #fafafa;
}

.select2-container--default.select2-container--open.select2-container--above .select2-selection--single {
    border-top-color: #ccc;
    border-bottom-color: #ccc;
}

// =============================================================================
// Dropdown styles
// =============================================================================

.select2-dropdown {
    border: 1px solid #999;
    border-radius: 0;
    background-color: #fafafa;
    box-shadow: 0 0 5px #999;
    z-index: 9999;
}

.select2-dropdown--below {
    border-top: 0;
}

.select2-dropdown--above {
    border-bottom: 0;
}

// =============================================================================
// Search field in dropdown
// =============================================================================

.select2-search--dropdown {
    padding: 4px;

    .select2-search__field {
        width: 100%;
        height: 28px;
        padding: 4px 20px 4px 8px;
        border: 1px solid #aaa;
        border-radius: 0;
        margin-bottom: 0;
        outline: 0;
        font-family: sans-serif;
        font-size: 0.875rem;
        box-shadow: none;
        // The sprite has the search icon at y=-22px, center it vertically
        background: #fff url('#{$image-path-partials}/select2/select2.png') no-repeat calc(100% - 5px) -23px;

        &.select2-search__field--loading {
            background: #fff url('#{$image-path-partials}/select2/select2-spinner.gif') no-repeat calc(100% - 5px) center;
        }
    }
}

// =============================================================================
// Results/options list
// =============================================================================

.select2-results {
    font-size: 0.875rem;
}

.select2-results__options {
    max-height: 200px;
    overflow-y: auto;
    padding: 0 0.25rem;
    margin: 0.25rem 0;
}

.select2-results__option {
    padding: 0.25rem;
    min-height: 1em;
    user-select: none;

    &[aria-selected="true"] {
        background-color: transparent;
    }

    &--highlighted[aria-selected] {
        background-color: #3875d7;
        color: #fff;
    }

    // Nested groups padding
    .select2-results__option {
        padding-left: 20px;
    }
}

.select2-results__group {
    font-weight: bold;
    padding: 0.25rem;
}

// Search term highlighting
.select2-results__option em {
    background: #feffde;
    font-style: normal;
}

.select2-results__option--highlighted em {
    background: transparent;
}

// Loading and messages
.select2-results__message {
    padding: 0.25rem;
    color: #999;
    font-style: italic;
}

// =============================================================================
// Disabled states
// =============================================================================

.select2-container--default.select2-container--disabled {
    .select2-selection--single,
    .select2-selection--multiple {
        background-color: #f4f4f4;
        background-image: none;
        border-color: #ddd;
        cursor: default;
    }

    .select2-selection__choice {
        padding: 3px 5px;
        border-color: #ddd;
        background-image: none;
        background-color: #f4f4f4;
    }

    .select2-selection__choice__remove {
        display: none;
    }
}

.select2-results__option[aria-disabled="true"] {
    background-color: #f4f4f4;
    color: #666;
    cursor: default;
}

// =============================================================================
// Locked choices (in multi-select)
// =============================================================================

.select2-selection__choice--locked {
    padding: 3px 5px !important;
}

// =============================================================================
// Hidden/off-screen elements (accessibility)
// =============================================================================

.select2-hidden-accessible {
    clip: rect(0 0 0 0) !important;
    width: 1px !important;
    height: 1px !important;
    border: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
    position: absolute !important;
    outline: 0 !important;
    left: 0 !important;
    top: 0 !important;
}

// =============================================================================
// Close mask (modal backdrop)
// =============================================================================

.select2-close-mask {
    border: 0;
    margin: 0;
    padding: 0;
    position: fixed;
    left: 0;
    top: 0;
    min-height: 100%;
    min-width: 100%;
    height: auto;
    width: auto;
    opacity: 0;
    z-index: 9998;
    background-color: #fff;
    filter: alpha(opacity=0);
}

// =============================================================================
// Retina display icons
// =============================================================================

@media only screen and (-webkit-min-device-pixel-ratio: 1.5),
       only screen and (min-resolution: 144dpi) {
    .select2-search--dropdown .select2-search__field {
        background-image: url('#{$image-path-partials}/select2/select2.png') !important;
        background-repeat: no-repeat !important;
        background-size: 60px 40px !important;
        background-position: 100% -21px !important;
    }
}
