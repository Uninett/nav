# This file contains the configuration for collection of stats from DHCP servers.
#
# For NAV to collect stats from a DHCP server, API endpoints on the DHCP server
# that serve such statistics must be set up. (Such API endpoints are usually a
# part of the DHCP server implementation.) Afterwards, options for the the DHCP
# server, such as its type and its API's root URL, must be set in a new section
# in this file. The section's name must start with 'server_' for NAV to
# recognize the section as configuring a DHCP server (other sections are
# reserved for future use). Depending on the type you specify for the DHCP
# server, various additional options may be available to control NAV's behavior
# for that DHCP server.
#
#
# [server_foo] <--- This section configures a DHCP server with name 'foo'
# type=dnsmasq <--- This option tells us it's a dnsmasq server
# url=https://url.to.dnsmasq.server/api/ <--- This option tells us where the API
#                                             root is located
# token=/path/to/token <--- different server types have different additional
#                           options (see their respective sections below)
#
# [foo] <--- This section does *not* configure a DHCP server
#            (and is reserved for future use)
# loglevel=info
# threads=4
#
#
# Note that server names (the part after 'server_' in section names) are used
# when storing statistics from the respective DHCP server into the
# Graphite/Carbon timeseries database backend. Therefore, the server names
# *should* contain only English letters, digits, underscores, and hyphens. Any
# other character is replaced by an underscore, which at best causes some
# confusion and at worst causes unrelated DHCP servers to be treated as the same
# server in the timeseries database.
#
#
# [server_foo!]  <--- This section configures a DHCP server with name stored by
#                     NAV as 'foo_'
#
# [server_foo?]  <--- This section *also* configures a DHCP server with name
#                     stored by NAV as 'foo_'
#
#
# The remainder of this commentary documents how to configure the
# various types of DHCP servers that are supported:
#
#
# Configuring DHCP servers with type 'kea-dhcp4'
# ==============================================
# If the DHCP server you want to collect stats from is a Kea DHCPv4 server,
# its type should be 'kea-dhcp4'.
#
# Mandatory options
# -----------------
# * The 'type' option, specifying what type of DHCP server is being configured.
#   Its value must be set to 'kea-dhcp4'.
#
# * The 'url' option, specifying where the server's Kea API (control socket) is
#   located. The url's scheme must be 'http' or 'https'. Sensitive data (such as
#   passwords) that might be stored in the Kea DHCPv4 server's configuration is
#   transmitted during correspondence, so using 'https' is highly recommended.
#   As a sidenote, such possibly sensitive data is also temporarily stored in
#   the memory of a NAV process.
#
# Optional options
# ----------------
# * The 'timeout' option, specifying how many seconds the client should wait for
#   an HTTP response from the Kea API (control socket) before timing out.
#   Defaults to 5.0.
#
# * The 'http_basic_username' and 'http_basic_password' options. When
#   both of these options are set, HTTP Basic Authentication will be used in
#   communication with the Kea API (control socket).
#
# * The 'client_cert_path' and 'client_cert_key_path' options. These options
#   enable authentication to the Kea API (control socket) using client-side SSL
#   certificates if either 'client_cert_path' is specified alone, or if
#   'client_cert_path' and 'client_cert_key_path' are both specified. If
#   'client_cert_path' is specified alone, it specifies the path to a file
#   containing both the client's certificate and its private key. If
#   'client_cert_path' and 'client_cert_key_path' are both specified,
#   'client_cert_path' specifies the path to a file containing the client's
#   certificate, and 'client_cert_key_path' specifies the path to a file
#   containing the client's private key. Authentication using client-side SSL
#   certificates require the Kea API's url to have the 'https' scheme.
#
# * The 'user_context_groupname_key' option, specifying how NAV finds the group
#   name (if any) of a Kea DHCPv4 address pool. On the server-side each Kea
#   DHCPv4 address pool is configured as a JSON object with a mandatory 'pool'
#   key and an optional 'user-context' key holding an arbitrary JSON object. The
#   'user_context_groupname_key' option specifies which key in this
#   'user-context' object NAV will look up to find the group name (if any) of a
#   Kea DHCPv4 address pool. By default, NAV will look for the 'group' key.
#   Example:
#
#     If 'user_context_groupname_key' has been set to 'group-in-nav' for a Kea
#     DHCPv4 server with the following configuration:
#
#     {
#       "Dhcp4": {
#         "subnet4": [
#           {
#             "subnet":  "172.31.255.0/24",
#             "pools": [
#               {
#                 "pool": "172.31.255.0/25",
#                 "pool-id": 1,
#                 "user-context": {
#                    "group-in-nav": "oslo-staff"
#                 }
#               }
#             ],
#             "id": 1,
#             "interface": "eth0"
#           }
#         ]
#       }
#     }
#
#     Then NAV will associate with the address pool '172.31.255.0/25' the group
#     name 'oslo-staff'. Note that the group name of a Kea DHCPv4 address pool
#     *should* only contain English letters, digits, underscores, and hyphens as
#     it will be stored into the Graphite/Carbon timeseries database backend.
#
#
# Example 'kea-dhcp4' configuration
# ---------------------------------
# [server_example-1]
# type=kea-dhcp4
# url=https://example.org:8080/
# timeout=5.0
# http_basic_username=nav
# http_basic_password=cfcc3475c4de4f0484a4a475ec0a6edd
# client_cert_path=/etc/client-cert.pem
# client_cert_key_path=/etc/client-cert-key.pem
# user_context_groupname_key=group
